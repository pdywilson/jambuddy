<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Jam Buddy</title>
    <style type="text/css">
        * {
            margin: 0px;
            padding: 0px;
        }

        #CSConsole {
            background-color: #FAFAFA;
            border-top: 1px solid #333333;
            bottom: 0px;
            height: 200px;
            overflow-y: scroll;
            position: fixed;
            width: 100%;
        }
    </style>
    <script type="text/javascript" src="Cindy.js"></script>

<script id="csinit" type="text/x-cindyscript">
    seloptions=[
        ["Piano"],
        ["Guitar"],
        ["Harp"],
        ["Bass"],
        ["Sax"],
        ["Violin"]
    ];

    selleft = 1.3;
    selright = 1.7;
    selbottom = 0.5;
    seltop = 1.5;
    selbox=[[selleft,selbottom],[selright,selbottom],[selright,seltop],[selleft,seltop]];
    sel=0;
    inselbox(p):=(p.x>selleft&p.y>selbottom&p.x<selright&p.y<seltop);

    selactive=false;
    selref=0;
    selshift=0;
    realshift=0;
</script>

<script id="csmousedown" type="text/x-cindyscript">
if(inselbox(mouse().xy),
    selactive=true;
    selref=(mouse().y*4);
    selshift=0;
);
</script>
<script id="csmousedrag" type="text/x-cindyscript">
    if(selactive, selshift=(mouse().y*4)-selref);


</script>
<script id="csmouseup" type="text/x-cindyscript">
    selo=sel;
     if(selactive,
        sel=min( max(sel+round(selshift),0),length(seloptions)-1);
      );
      //if(sel!=selo,stop()); //change instrument
      selactive=false;
      selshift=0;
</script>
<script id="csdraw" type="text/x-cindyscript">

    realshift=.8*realshift+.2*(selshift+sel);
    apply(1..length(seloptions),
        ypos=realshift/10-(#-1)/10;
        drawtext((selleft,ypos+selbottom+0.42),size->25,seloptions_#_1,color->(1,1,1),alpha->1-(|ypos|)^(1/2));
    );
    draw(selbox_1+(0,.4),selbox_2+(-.1,.4),color->(1,1,1));
    draw(selbox_1+(0,.5),selbox_2+(-.1,.5),color->(1,1,1));

;
</script>

<script id="csmouseclick" type="text/x-cindyscript">

    if(inselbox(mouse().xy),
         selo=sel;
         if(mouse().y<selbottom+0.5,
            sel=sel+floor(1+.5*(selbottom+0.5-mouse().y));
            sel=min(length(seloptions)-1,sel)
        );
         if(mouse().y>selbottom+1,
            sel=sel-floor(1+.5*(-(selbottom+1)+mouse().y));
            sel=max(0,sel)
        );
         selactive=false;
         selshift=0;
     );

;
</script>


<script type="text/javascript">
var cdy = CindyJS({
  scripts: "cs*",
  defaultAppearance: {
    dimDependent: 0.7,
    fontFamily: "sans-serif",
    lineSize: 1,
    pointSize: 5.0,
    textsize: 12.0
  },
  angleUnit: "Â°",
  geometry: [
    //{name: "German", type: "ToggleButton", pos: [20,20], color: [0.0, 0.0, 0.0], fillcolor: [1.0, 1.0, 1.0], fillalpha: 1.0, alpha: 0.8999999761581421, text: "German Keyboard!"},
 ],
  autoplay: true,
  keylistener: true,
  images:{on:"common/Pause.png", off:"common/Play.png"},
  ports: [{
    id: "CSCanvas",
    virtualwidth: 1920,
      virtualheight: 972,
      fill:"window",
      transform: [{visibleRect: [-2,2,2,-2]}],
    background: "rgb(50,50,50)"
  }],
  cinderella: {build: 1847, version: [2, 9, 1847]}
});
</script>
</head>
<body>
    <div id="CSCanvas"></div>

</body>
</html>
